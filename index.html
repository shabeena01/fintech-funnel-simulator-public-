<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Fintech Funnel Simulator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Official PostHog loader: defines window.posthog -->
  <script>
  !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){
    function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),
    t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}
    (o=t.createElement("script")).type="text/javascript",o.async=!0,
    o.src=s.api_host+"/static/array.js",(n=t.getElementsByTagName("script")[0]).parentNode.insertBefore(o,n);
    var u=e;g(u,"init");g(u,"capture");g(u,"identify");g(u,"reset");g(u,"setPersonProperties");
    e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
  // üîë use your own key + correct region host
  posthog.init("phc_By2SVZiSoMg5S2JMG3rZDknm4xDydcwq2m3WP6PTIsK", { api_host: "https://us.i.posthog.com" });
  </script>

  <script>
    // helpers
    function trackEvent(name, props={}) {
      posthog.capture(name, props);
      console.log("Event tracked:", name, props);
    }
    function resetUser() {
      posthog.reset();
      console.log("User reset");
    }
  </script>
</head>

<body>
  <h1>Fintech Funnel Simulator</h1>
  <button onclick="startUser()">Start New User</button>
  <button onclick="trackEvent('signup')">1) signup</button>
  <button onclick="trackEvent('add_payment_method')">2) add_payment_method</button>
  <button onclick="trackEvent('fund_wallet')">3) fund_wallet</button>
  <button onclick="trackEvent('transaction_success')">4) transaction_success</button>
  <button onclick="resetUser()">‚ôªÔ∏è Reset User</button>
  <p>Open PostHog ‚Üí Funnels: signup ‚Üí add_payment_method ‚Üí fund_wallet ‚Üí transaction_success</p>
  <script>
    function startUser(){
      posthog.reset(); // clears out previous user session
      const id = 'user_' + Math.random().toString(36).slice(2,7);
      posthog.identify(id);
      posthog.setPersonProperties({ plan: 'free' });
      console.log('New user:', id);
    }
  </script>
</body>
</html>
